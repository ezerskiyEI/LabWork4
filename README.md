# Лабораторная работа № 4

**Курс:** ПнаЯВУ  
**Группа:** 334702  
**Вариант:** № 2  
**ФИО:** Езерский Е.И.

![папич-артас](https://github.com/ezerskiyEI/LabWork2/raw/main/%D0%BF%D0%B0%D0%BF%D0%B8%D1%87-%D0%B0%D1%80%D1%82%D0%B0%D1%81.gif)

## Описание

В данной лабораторной работе реализован сервис для управления информацией об автомобилях и их владельцах. Сервис предоставляет RESTful API для выполнения CRUD-операций, таких как добавление, получение, обновление и удаление информации об автомобилях и владельцах. Приложение разработано с использованием Spring Boot и использует PostgreSQL для хранения данных.

## Изменеия

1. **Обработка ошибок**:
    - Глобальный обработчик исключений (`@ControllerAdvice`)
    - Кастомные HTTP-ответы для 400 и 500 ошибок
    - Логирование всех исключений

2. **Логирование**:
    - Аспекты для логирования запросов/ответов (`LoggingAspect`)
    - SLF4J с конфигурацией в `application.properties`
    - Подробные логи для отладки

3. **Документация API**:
    - Swagger UI с аннотациями OpenAPI 3.0
    - Описание всех endpoint'ов и моделей
    - Примеры запросов/ответов

4. **Проверка стиля кода**:
    - Официальный [Google Checkstyle](https://checkstyle.sourceforge.io/google_style.html)
    - Интеграция через Maven plugin
    - Автоматическая проверка при сборке

### Сервис для управления автомобилями:

- Реализован класс-контроллер `CarInfoController`, который обрабатывает запросы по управлению информацией об автомобилях.
- Добавлен класс `CarInfo`, представляющий модель информации об автомобиле с полями VIN, марка, модель и год выпуска.
- Реализован класс `CarInfoService`, который содержит бизнес-логику для работы с данными об автомобилях.

### Сервис для управления владельцами:

OwnerController — контроллер для обработки HTTP-запросов по управлению владельцами автомобилей.

Owner — модель данных для представления информации о владельце, включая:

уникальный идентификатор (ID),

имя (name),

список автомобилей, которыми владеет данный человек.

OwnerService — сервисный слой, содержащий бизнес-логику для работы с владельцами автомобилей.

## CRUD-операции  и поддерживаемые эндпоинты

Работа с автомобилями:

Получение всех автомобилей:
GET /cars
Возвращает список всех автомобилей.

Получение информации об автомобиле по VIN:
GET /cars/{vin}
Возвращает информацию об автомобиле с указанным VIN (если автомобиль существует).

Добавление нового автомобиля:
POST /cars

Обновление информации об автомобиле по VIN:
PUT /cars/{vin}
Позволяет обновить информацию об автомобиле с указанным VIN. Требуется передать обновленные данные.

Удаление автомобиля по VIN:
DELETE /cars/{vin}
Удаляет автомобиль с указанным VIN.

Работа с владельцами:
Получение всех владельцев:
GET /owners
Возвращает список всех владельцев.

Получение информации о владельце по ID:
GET /owners/{id}
Возвращает информацию о владельце с указанным ID.

Добавление нового владельца:
POST /owners
Позволяет добавить нового владельца. Требуется передать данные в формате JSON:

Обновление информации о владельце:
PUT /owners/{id}
Позволяет обновить информацию о владельце с указанным ID.

Удаление владельца по ID:
DELETE /owners/{id}
Удаляет владельца с указанным ID.

Добавление автомобиля владельцу:
POST /owners/{ownerId}/cars/{vin}
Позволяет связать автомобиль с владельцем. Требуется указать ID владельца и VIN автомобиля.

## Использование

Для работы с сервисом можно использовать Postman или любой другой HTTP-клиент. Приложение поддерживает следующие операции:

- Получение информации обо всех автомобилях.
- Получение информации об автомобиле по VIN.
- Добавление нового автомобиля.
- Удаление автомобиля по VIN.
- Получение информации обо всех владельцах.
- Добавление нового владельца.

## Задание

В рамках лабораторной работы были выполнены следующие задачи:
Настроена база данных PostgreSQL
Реализованы сущности CarInfo и Owner с Many-to-Many связью
Добавлены REST-контроллеры и сервисы
Реализованы CRUD-операции для всех сущностей
Добавлен кэш (Map)
Добавлен кастомный @Query с параметром
