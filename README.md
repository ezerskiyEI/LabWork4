# Лабораторная работа № 6

**Курс:** ПнаЯВУ  
**Группа:** 334702  
**Вариант:** № 2  
**ФИО:** Езерский Е.И.

![папич-артас](https://github.com/ezerskiyEI/LabWork2/raw/main/%D0%BF%D0%B0%D0%BF%D0%B8%D1%87-%D0%B0%D1%80%D1%82%D0%B0%D1%81.gif)

## Описание

Проект представляет собой RESTful API для управления информацией об автомобилях и их владельцах, реализованный на Spring Boot 3.4.2. Сервис поддерживает CRUD-операции, bulk-запросы, кэширование, логирование, документацию API через Swagger и проверку стиля кода. Данные хранятся в PostgreSQL, а сущности CarInfo и Owner связаны отношением Many-to-Many. Бизнес-логика покрыта unit-тестами с покрытием >80% (Jacoco). Добавлен сервис для подсчёта обращений с потокобезопасным счётчиком.

## Изменеия

CRUD-операции для автомобилей и владельцев.
Bulk-операции для получения и добавления данных с использованием Java 8 Stream API.
Кэширование с использованием Map для оптимизации запросов.
Логирование запросов и исключений через SLF4J и AOP (LoggingAspect).
Документация API с помощью Swagger (OpenAPI 3.0).
Проверка стиля кода с использованием Google Checkstyle.
Обработка ошибок через глобальный обработчик (@ControllerAdvice).
Подсчёт обращений с помощью потокобезопасного счётчика (RequestCounterService).
Unit-тесты с использованием JUnit 5 и Mockito, покрытие >80%.

### Сервис для управления автомобилями:

- Реализован класс-контроллер `CarInfoController`, который обрабатывает запросы по управлению информацией об автомобилях.
- Добавлен класс `CarInfo`, представляющий модель информации об автомобиле с полями VIN, марка, модель и год выпуска.
- Реализован класс `CarInfoService`, который содержит бизнес-логику для работы с данными об автомобилях.

### Сервис для управления владельцами:

OwnerController — контроллер для обработки HTTP-запросов по управлению владельцами автомобилей.

Owner — модель данных для представления информации о владельце, включая:

уникальный идентификатор (ID),

имя (name),

список автомобилей, которыми владеет данный человек.

OwnerService — сервисный слой, содержащий бизнес-логику для работы с владельцами автомобилей.

## CRUD-операции  и поддерживаемые эндпоинты

Работа с автомобилями:

Получение всех автомобилей:
GET /cars
Возвращает список всех автомобилей.

Получение информации об автомобиле по VIN:
GET /cars/{vin}
Возвращает информацию об автомобиле с указанным VIN (если автомобиль существует).

Добавление нового автомобиля:
POST /cars

Обновление информации об автомобиле по VIN:
PUT /cars/{vin}
Позволяет обновить информацию об автомобиле с указанным VIN. Требуется передать обновленные данные.

Удаление автомобиля по VIN:
DELETE /cars/{vin}
Удаляет автомобиль с указанным VIN.

Работа с владельцами:
Получение всех владельцев:
GET /owners
Возвращает список всех владельцев.

Получение информации о владельце по ID:
GET /owners/{id}
Возвращает информацию о владельце с указанным ID.

Добавление нового владельца:
POST /owners
Позволяет добавить нового владельца. Требуется передать данные в формате JSON:

Обновление информации о владельце:
PUT /owners/{id}
Позволяет обновить информацию о владельце с указанным ID.

Удаление владельца по ID:
DELETE /owners/{id}
Удаляет владельца с указанным ID.

Добавление автомобиля владельцу:
POST /owners/{ownerId}/cars/{vin}
Позволяет связать автомобиль с владельцем. Требуется указать ID владельца и VIN автомобиля.

## Использование

Для работы с сервисом можно использовать Postman или любой другой HTTP-клиент. Приложение поддерживает следующие операции:

- Получение информации обо всех автомобилях.
- Получение информации об автомобиле по VIN.
- Добавление нового автомобиля.
- Удаление автомобиля по VIN.
- Получение информации обо всех владельцах.
- Добавление нового владельца.

## Задание

"1.Добавить POST метод для работы со списком параметров (передаются в теле запроса) для bulk операций, организовать работу сервиса используя Java 8 (Stream API, лямбда-выражения).
2. Покрытие Unit-тестами на >80% (бизнес-логика)."